# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Resource types

* [`par`](#par): Manages Ansible playbook execution against localhost.  The PAR (Puppet Ansible Runner) type executes Ansible playbooks on the local machine u

## Resource types

### <a name="par"></a>`par`

Manages Ansible playbook execution against localhost.

The PAR (Puppet Ansible Runner) type executes Ansible playbooks on the local
machine using `ansible-playbook -i localhost, --connection=local`. This enables
integration of Ansible automation workflows into Puppet catalogs without requiring
SSH access, inventory files, or remote connections.

Key features:
- Executes playbooks against localhost only
- No SSH or inventory configuration required
- Supports Puppet noop mode (--noop flag)
- Provides clear error messages for missing files or executables
- Integrates with Puppet's resource model and reporting

The type validates parameters at catalog compilation time, while the provider
handles actual playbook execution during catalog application.

Requirements:
- Ansible must be installed (ansible-playbook must be in PATH)
- Playbook files must exist and be readable
- Playbooks should target localhost and use connection: local

For more information about Ansible playbooks, see:
https://docs.ansible.com/ansible/latest/user_guide/playbooks.html

#### Properties

The following properties are available in the `par` type.

##### `ensure`

Valid values: `present`, `absent`

Manages the presence of the PAR resource.

The PAR type uses 'ensurable' to trigger playbook execution. When ensure
is set to 'present' (the default), the playbook will be executed during
catalog application.

Note: Unlike most Puppet resources, PAR executes the playbook every time
(similar to exec resources). Idempotency is handled by Ansible's own
change detection mechanism.

Default value: `present`

#### Parameters

The following parameters are available in the `par` type.

* [`name`](#-par--name)
* [`playbook`](#-par--playbook)
* [`provider`](#-par--provider)

##### <a name="-par--name"></a>`name`

namevar

The name of the PAR resource (namevar).

This parameter serves as the unique identifier for the PAR resource in the
Puppet catalog. It should be a descriptive string that indicates the purpose
of the playbook execution.

The name parameter accepts alphanumeric characters, hyphens, and underscores.
It has no effect on the actual playbook execution - it only serves as a
catalog identifier.

Valid characters: a-z, A-Z, 0-9, hyphen (-), underscore (_)

@example Valid resource names
  par { 'setup-webserver': ... }
  par { 'configure_database': ... }
  par { 'deploy-application': ... }

##### <a name="-par--playbook"></a>`playbook`

The absolute path to the Ansible playbook file (required).

This parameter specifies the location of the Ansible playbook YAML file to
execute. The path must be absolute (starting with '/' on Unix/Linux or a
drive letter on Windows) to ensure consistent behavior across different
execution contexts.

Requirements:
- Must be an absolute path (relative paths are rejected)
- File must exist and be readable by the Puppet agent process
- Must be a valid Ansible playbook YAML file
- Playbooks should target localhost and use connection: local

The provider validates the file's existence before attempting execution.
If the playbook file is managed by a Puppet file resource, PAR will
automatically create an autorequire relationship to ensure proper ordering.

Path normalization: The path is automatically expanded and normalized using
File.expand_path to resolve symlinks and relative components.

@example Unix/Linux absolute paths
  playbook => '/etc/ansible/playbooks/webserver.yml'
  playbook => '/opt/config/setup.yml'
  playbook => '/home/admin/playbooks/deploy.yml'

@example Windows absolute paths
  playbook => 'C:/Ansible/playbooks/setup.yml'
  playbook => 'D:/config/playbook.yml'

##### <a name="-par--provider"></a>`provider`

The specific backend to use for this `par` resource. You will seldom need to specify this --- Puppet will usually
discover the appropriate provider for your platform.

